# 光学对齐参考

## 什么是光学对齐？

**光学对齐 (Optical Alignment)** 是指根据人眼视觉感知进行的对齐调整，而非严格的数学对齐。

人眼对不同形状、重量的元素感知不同，因此需要「看起来齐」而非「数字上齐」。

---

## 常见光学调整场景

### 1. 圆形 vs 方形

圆形在视觉上比同尺寸的方形小，需要放大：

```
方形: 80×80px
圆形: 需要 84×84px 才能看起来一样大 (放大 ~5%)
```

SVG 示例：
```svg
<!-- 方形图标 -->
<rect width="80" height="80"/>

<!-- 圆形图标需要略大 -->
<circle r="42"/>  <!-- 直径 84px -->
```

### 2. 三角形/箭头

三角形需要向尖端方向偏移，才能看起来居中：

```
三角形向右: 需要左移 2-3px
三角形向上: 需要下移 2-3px
```

### 3. 文字居中

不同字符的视觉重心不同：

| 字符类型 | 调整方向 |
|----------|----------|
| 大写字母 | 通常偏上，需下移 1-2px |
| 数字 | 视觉居中，无需调整 |
| 小写字母 | 视觉偏下（有下伸部） |
| 中文 | 方正，基本无需调整 |

---

## 数字与符号对齐

### % 符号

% 符号在大多数字体中基线偏高：

```svg
<!-- 问题：% 看起来偏高 -->
<text>85%</text>

<!-- 解决方案 1：整体字号，% 下移 -->
<text>
  <tspan>85</tspan>
  <tspan dy="3">%</tspan>
</text>

<!-- 解决方案 2：% 字号缩小 -->
<text>
  <tspan font-size="64">85</tspan>
  <tspan font-size="48" dy="2">%</tspan>
</text>
```

### 常用符号对照表

| 符号 | 问题 | 修正 |
|------|------|------|
| `%` | 偏高 | dy="+2~4" |
| `°` | 偏高 | dy="-2~0" |
| `∞` | 偏小 | scale(1.1) |
| `×` | 居中偏下 | dy="-1~0" |
| `·` | 居中 | 通常无需调整 |
| `—` | 偏高 | dy="+1~2" |

---

## 中英文混排对齐

### 基线问题

中文和英文的基线不同：
- 英文：基线在字母底部
- 中文：基线在字符中下部

```svg
<!-- 混排时英文会偏下 -->
<text>
  <tspan font-family="Georgia">MATCH</tspan>
  <tspan font-family="Noto Serif SC">指数</tspan>
</text>

<!-- 可以微调英文位置 -->
<text>
  <tspan font-family="Georgia" dy="-2">MATCH</tspan>
  <tspan font-family="Noto Serif SC" dy="2">指数</tspan>
</text>
```

### 字号差异混排

当中英文字号不同时：

```svg
<!-- 英文小号标签 + 中文大号内容 -->
<text>
  <tspan font-size="20" fill="#888">INDEX</tspan>
</text>
<text y="50">
  <tspan font-size="48">匹配度</tspan>
</text>
```

---

## 间距光学补偿

### 不同形状的元素间距

数学等距 ≠ 视觉等距

```
[ ■ ]  [ ● ]  [ ▲ ]
   40px    40px       ← 数学等距

[ ■ ]   [ ● ]    [ ▲ ]
   40px     42px       ← 光学等距（圆形两侧需要更多空间）
```

### 补偿参考值

| 相邻元素 | 补偿方向 | 补偿量 |
|----------|----------|--------|
| 方形-圆形 | 圆形外扩 | +2px |
| 方形-三角 | 三角外扩 | +3px |
| 圆形-圆形 | 无 | 0 |
| 重元素-轻元素 | 轻元素靠近 | -1~2px |

---

## SVG 光学调整技巧

### 使用 transform 微调

```svg
<!-- 光学居中的圆形 -->
<g transform="translate(540, 720)">
  <!-- 数学中心在 (540, 720) -->
  <circle cx="0" cy="0" r="40" transform="translate(0, -2)"/>
  <!-- 视觉中心略上移 -->
</g>
```

### 使用 dy/dx 调整文字

```svg
<text x="540" y="500" text-anchor="middle">
  <tspan>85</tspan>
  <tspan dx="-2" dy="3" font-size="0.75em">%</tspan>
  <!-- dx 负值让 % 靠近数字，dy 正值下移基线 -->
</text>
```

### 视觉居中 vs 数学居中

```svg
<!-- 数学居中 -->
<text x="540" y="720" text-anchor="middle">居中文字</text>

<!-- 光学居中（大写字母标题）-->
<text x="540" y="722" text-anchor="middle">TITLE</text>
<!-- 大写字母视觉重心偏上，整体下移 2px -->
```

---

## 检查流程

1. **初步对齐**：使用数学居中/等距
2. **视觉检查**：退后一步看整体
3. **识别问题**：哪里看起来「不对劲」？
4. **微调**：1-3px 的调整
5. **再次检查**：确认视觉平衡

### 检查技巧

- **眯眼测试**：眯眼看整体，偏差更明显
- **翻转测试**：水平/垂直翻转，检查对称性
- **打印测试**：打印出来，用尺子量
- **多人检查**：请他人检查，避免视觉疲劳

---

## 常见错误

1. **过度调整**：调整过大（>5px）通常是其他问题
2. **不一致调整**：同类元素调整量不同
3. **忽略上下文**：孤立看元素而非整体
4. **机械应用**：每个场景都不同，规则是参考

---

## 工具建议

1. **网格参考线**：显示 8pt 网格辅助对齐
2. **标尺工具**：测量实际像素距离
3. **截图对比**：调整前后截图对比
4. **放大检查**：200% 放大检查细节

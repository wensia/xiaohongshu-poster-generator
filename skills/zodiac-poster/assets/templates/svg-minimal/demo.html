<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG 极简留白模板 - 双子座</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="../../js/poster-utils.js"></script>
    <style>
        body {
            font-family: 'Noto Serif SC', serif;
            background-color: #e5e5e5;
            min-height: 100vh;
        }
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;600&display=swap');
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // 配色：极简留白
        const palette = {
            accent: '#D97757',
            textDark: '#2D2A26',
            textBody: '#3D3832',
            textMuted: '#7A756E',
            textQuote: '#9A958E',
            textFooter: '#B5B0A8',
            bgLight: '#FAF9F7',
            bgDark: '#F5F3F0',
        };

        // 双子座图标
        const GeminiIcon = ({ size = 80, color = palette.accent }) => (
            <g>
                <line x1="0" y1={-size/2 + 10} x2={size} y2={-size/2 + 10}
                      stroke={color} strokeWidth="2" strokeLinecap="round"/>
                <line x1="0" y1={size/2 - 10} x2={size} y2={size/2 - 10}
                      stroke={color} strokeWidth="2" strokeLinecap="round"/>
                <line x1={size * 0.3} y1={-size/2 + 10} x2={size * 0.3} y2={size/2 - 10}
                      stroke={color} strokeWidth="2" strokeLinecap="round"/>
                <line x1={size * 0.7} y1={-size/2 + 10} x2={size * 0.7} y2={size/2 - 10}
                      stroke={color} strokeWidth="2" strokeLinecap="round"/>
            </g>
        );

        // 封面卡片
        const CoverCard = () => (
            <svg viewBox="0 0 1080 1440" className="w-full h-full" xmlns="http://www.w3.org/2000/svg">
                {/* 渐变背景 */}
                <defs>
                    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stopColor={palette.bgLight} />
                        <stop offset="100%" stopColor={palette.bgDark} />
                    </linearGradient>
                    {/* 光晕效果 */}
                    <radialGradient id="glowGradient" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stopColor={palette.accent} stopOpacity="0.08" />
                        <stop offset="70%" stopColor={palette.accent} stopOpacity="0" />
                    </radialGradient>
                </defs>
                <rect width="1080" height="1440" fill="url(#bgGradient)" />

                {/* 星座图标区域 */}
                <g transform="translate(540, 200)">
                    {/* 光晕 */}
                    <circle cx="0" cy="0" r="100" fill="url(#glowGradient)" />
                    {/* 图标 */}
                    <g transform="translate(-40, -40)">
                        <GeminiIcon size={80} />
                    </g>
                </g>

                {/* 星座名称 */}
                <text x="540" y="320" textAnchor="middle" fill={palette.accent}
                      fontSize="28" fontWeight="500" letterSpacing="10">
                    双子座
                </text>
                <text x="540" y="355" textAnchor="middle" fill={palette.textQuote}
                      fontSize="14" letterSpacing="6">
                    GEMINI
                </text>

                {/* 主标题 */}
                <text x="540" y="620" textAnchor="middle" fill={palette.textDark}
                      fontSize="62" fontWeight="500" letterSpacing="3">
                    最怕的不是
                    <tspan fill={palette.accent}>孤独</tspan>
                </text>
                <text x="540" y="720" textAnchor="middle" fill={palette.textDark}
                      fontSize="62" fontWeight="500" letterSpacing="3">
                    是被
                    <tspan fill={palette.accent}>束缚</tspan>
                </text>

                {/* 分隔线 */}
                <line x1="515" y1="800" x2="565" y2="800"
                      stroke={palette.accent} strokeWidth="1" />

                {/* 副标题 */}
                <text x="540" y="870" textAnchor="middle" fill={palette.textMuted}
                      fontSize="24" fontWeight="300" letterSpacing="5">
                    自由比什么都重要
                </text>

                {/* 底部 */}
                <text x="540" y="1340" textAnchor="middle" fill={palette.textFooter}
                      fontSize="15" letterSpacing="6">
                    情感独白
                </text>
            </svg>
        );

        // 内页卡片
        const ContentCard = ({ partNum, pageNum, sectionTitle, content, quote }) => (
            <svg viewBox="0 0 1080 1440" className="w-full h-full" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id={`bgGradient${pageNum}`} x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stopColor={palette.bgLight} />
                        <stop offset="100%" stopColor={palette.bgDark} />
                    </linearGradient>
                </defs>
                <rect width="1080" height="1440" fill={`url(#bgGradient${pageNum})`} />

                {/* PART 标签 */}
                <text x="540" y="120" textAnchor="middle" fill={palette.accent}
                      fontSize="14" letterSpacing="8">
                    · {partNum} ·
                </text>

                {/* 小标题 */}
                <text x="540" y="500" textAnchor="middle" fill={palette.accent}
                      fontSize="42" fontWeight="500" letterSpacing="6">
                    {sectionTitle}
                </text>

                {/* 正文内容 */}
                {content.map((line, i) => (
                    <text key={i} x="540" y={600 + i * 80} textAnchor="middle"
                          fill={palette.textBody} fontSize="32" letterSpacing="2">
                        {line}
                    </text>
                ))}

                {/* 引用语 */}
                <text x="540" y={600 + content.length * 80 + 100} textAnchor="middle"
                      fill={palette.textQuote} fontSize="22" fontWeight="300" letterSpacing="3">
                    {quote}
                </text>

                {/* 页码 */}
                <text x="540" y="1340" textAnchor="middle" fill={palette.textFooter}
                      fontSize="14" letterSpacing="4">
                    {pageNum}
                </text>
            </svg>
        );

        // 结尾页卡片
        const EndCard = ({ pageNum, sectionTitle, content }) => (
            <svg viewBox="0 0 1080 1440" className="w-full h-full" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id={`bgGradientEnd`} x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stopColor={palette.bgLight} />
                        <stop offset="100%" stopColor={palette.bgDark} />
                    </linearGradient>
                    <radialGradient id="glowGradientEnd" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stopColor={palette.accent} stopOpacity="0.06" />
                        <stop offset="70%" stopColor={palette.accent} stopOpacity="0" />
                    </radialGradient>
                </defs>
                <rect width="1080" height="1440" fill="url(#bgGradientEnd)" />

                {/* 星座图标 */}
                <g transform="translate(540, 200)">
                    <circle cx="0" cy="0" r="80" fill="url(#glowGradientEnd)" />
                    <g transform="translate(-26, -26)">
                        <GeminiIcon size={52} />
                    </g>
                </g>
                <text x="540" y="290" textAnchor="middle" fill={palette.accent}
                      fontSize="18" letterSpacing="10">
                    GEMINI
                </text>

                {/* 小标题 */}
                <text x="540" y="520" textAnchor="middle" fill={palette.accent}
                      fontSize="46" fontWeight="500" letterSpacing="6">
                    {sectionTitle}
                </text>

                {/* 正文 */}
                {content.map((line, i) => (
                    <text key={i} x="540" y={620 + i * 80} textAnchor="middle"
                          fill={palette.textBody} fontSize="32" letterSpacing="2">
                        {line}
                    </text>
                ))}

                {/* 结束标记 */}
                <text x="540" y={620 + content.length * 80 + 80} textAnchor="middle"
                      fill={palette.accent} fontSize="28">
                    ✦
                </text>

                {/* 页码 */}
                <text x="540" y="1340" textAnchor="middle" fill={palette.textFooter}
                      fontSize="14" letterSpacing="4">
                    {pageNum}
                </text>
            </svg>
        );

        const App = () => {
            const [downloading, setDownloading] = useState(false);

            const handleDownload = async () => {
                setDownloading(true);
                const cards = [
                    { id: 'card-1', name: '01_封面', mode: 'svg' },
                    { id: 'card-2', name: '02_不是怕孤独', mode: 'svg' },
                    { id: 'card-3', name: '03_怕的是束缚', mode: 'svg' },
                    { id: 'card-4', name: '04_结尾', mode: 'svg' },
                ];

                await window.PosterUtils.downloadPosters(cards, '双子座_极简留白_SVG.zip', {
                    onEnd: () => setDownloading(false),
                    onError: (err) => {
                        alert('下载失败: ' + err.message);
                        setDownloading(false);
                    }
                });
            };

            return (
                <div className="min-h-screen py-10 px-4 pb-24">
                    <h1 className="text-2xl font-bold text-center mb-2 text-gray-800">
                        SVG 极简留白模板
                    </h1>
                    <p className="text-center text-gray-500 mb-8">
                        使用 SVG 渲染，导出无需 html2canvas
                    </p>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-7xl mx-auto">
                        <div id="card-1" className="aspect-[3/4] w-full max-w-[270px] mx-auto shadow-lg rounded-xl overflow-hidden">
                            <CoverCard />
                        </div>
                        <div id="card-2" className="aspect-[3/4] w-full max-w-[270px] mx-auto shadow-lg rounded-xl overflow-hidden">
                            <ContentCard
                                partNum="01"
                                pageNum="02"
                                sectionTitle="不是怕孤独"
                                content={[
                                    "我们双子座啊",
                                    "真正怕的从来不是一个人待着"
                                ]}
                                quote="「 孤独是自由的另一个名字 」"
                            />
                        </div>
                        <div id="card-3" className="aspect-[3/4] w-full max-w-[270px] mx-auto shadow-lg rounded-xl overflow-hidden">
                            <ContentCard
                                partNum="02"
                                pageNum="03"
                                sectionTitle="怕的是束缚"
                                content={[
                                    "怕的是那种",
                                    "事事都要报备的感觉",
                                    "喘不过气来的亲密"
                                ]}
                                quote="「 被束缚的爱，不是真正的爱 」"
                            />
                        </div>
                        <div id="card-4" className="aspect-[3/4] w-full max-w-[270px] mx-auto shadow-lg rounded-xl overflow-hidden">
                            <EndCard
                                pageNum="04"
                                sectionTitle="所以"
                                content={[
                                    "给双子自由",
                                    "就是给他们最好的爱"
                                ]}
                            />
                        </div>
                    </div>

                    <button
                        onClick={handleDownload}
                        disabled={downloading}
                        className={`fixed bottom-8 right-8 z-50 flex items-center gap-2 px-6 py-3 rounded-full shadow-md transition-all duration-300 ${
                            downloading
                                ? 'bg-gray-400 cursor-not-allowed'
                                : 'bg-orange-500 hover:bg-orange-600 hover:scale-105'
                        } text-white font-medium`}
                    >
                        {downloading ? '打包中...' : '下载全套 (ZIP)'}
                    </button>
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
